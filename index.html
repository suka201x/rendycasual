<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<title>RENDY CASUAL</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
<style>
body.dark { background:#111; color:white; margin:0; font-family:sans-serif; }

/* Header */
#header{
  position:fixed; top:0; left:0; width:100%; z-index:120;
  display:flex; justify-content:center; align-items:center;
  background:#000; color:#fff; padding:14px 0;
  font-family:'Orbitron',sans-serif;
}
#channelName{ font-weight:900; font-size:2rem; letter-spacing:2px; text-shadow:0 0 6px rgba(255,0,0,0.3),0 0 12px rgba(255,255,255,0.25); }
#adminLogin{ position:absolute; right:18px; top:12px; background:#222; color:#fff; padding:6px 12px; border-radius:6px; cursor:pointer; font-weight:bold; z-index:130; }

/* Footer */
#footer{
  position:fixed; bottom:0; left:0; width:100%; z-index:100;
  text-align:center; background:#000; color:#fff; padding:12px; font-weight:bold;
  box-shadow:0 -2px 8px rgba(0,0,0,0.5);
}

/* Layout main */
#mainContent { margin-top:88px; margin-bottom:64px; width:100%; display:flex; justify-content:center; }
#middleSection{
  display:flex; flex-direction:row; justify-content:center; align-items:flex-start;
  gap:20px; width:100%; max-width:1200px; margin:0 auto; padding:0 12px;
}

/* Left column */
.left-col{ flex:1; max-width:900px; display:flex; flex-direction:column; gap:12px; }

/* Player */
#player-container{ position:relative; width:100%; aspect-ratio:16/9; border-radius:12px; overflow:hidden; background:#000; box-shadow:0 6px 16px rgba(0,0,0,0.6); }
#player-container.fullscreen{ width:100vw; height:100vh; aspect-ratio:auto; border-radius:0; }
#video{ width:100%; height:100%; object-fit:contain; background:#000; display:block; }
#overlay{ position:absolute; inset:0; background:rgba(240,240,240,0.85); color:#ff0000; font-size:20px; font-weight:bold; display:flex; align-items:center; justify-content:center; text-align:center; z-index:20; opacity:1; transition:opacity 0.25s; }

/* Controls */
#controls{ display:flex; gap:12px; align-items:center; position:absolute; bottom:10px; right:10px; z-index:25; background:rgba(0,0,0,0.7); padding:8px 12px; border-radius:12px; font-size:14px; color:#fff; transition:opacity 0.3s; }
#controls.hidden{ opacity:0; pointer-events:none; }
.volume-group{ display:flex; align-items:center; gap:6px; }
#volumeControl{ -webkit-appearance:none; width:90px; height:6px; background:#654321; border-radius:4px; }
#volumeControl::-webkit-slider-thumb{ -webkit-appearance:none; width:14px; height:14px; border-radius:50%; background:#fff; cursor:pointer; }

/* Quality */
#qualityOptions{ display:none; position:absolute; bottom:45px; right:40px; background:#000; padding:8px; border-radius:6px; flex-direction:column; gap:6px; z-index:30; }
#qualityOptions button{ background:transparent; border:none; color:#fff; cursor:pointer; font-size:0.9rem; font-weight:700; padding:6px 8px; text-align:left; }
#qualityOptions button.active{ color:#ff2d2d; }

/* Sawer & stream */
#sawerBox{ background:yellow; color:#000; font-weight:bold; padding:10px; border-radius:8px; text-align:center; margin-top:10px; }
.stream-row{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; background:#111; padding:10px; border-radius:10px; box-shadow:0 3px 8px rgba(0,0,0,0.5); margin-top:10px; }
.stream-row span{ min-width:180px; font-weight:bold; color:#fff; font-size:0.95rem; flex-shrink:0; }
.stream-row button{ color:#000; font-weight:bold; background:#fff; border:1px solid #000; padding:5px 12px; border-radius:6px; cursor:pointer; font-size:0.85rem; transition:all 0.15s; flex-shrink:0; }
.stream-row button.active{ background:red !important; color:white !important; }

/* Chat */
#chatContainer{ width:360px; min-width:300px; max-width:420px; background:#222; color:#fff; border-radius:8px; overflow:hidden; display:flex; flex-direction:column; gap:0; z-index:10; box-shadow:0 6px 16px rgba(0,0,0,0.5); flex-shrink:0; }
#chatBox{ flex:1; overflow-y:auto; padding:10px; font-size:0.95rem; }
#chatForm{ display:flex; padding:8px; background:#111; gap:6px; align-items:center; }
#chatForm input{ flex:1; padding:8px; border-radius:6px; border:none; background:#333; color:#fff; font-size:0.95rem; }
#chatForm button{ padding:8px 12px; background:red; color:#fff; border:none; border-radius:6px; font-weight:800; cursor:pointer; }

/* Popup Sawer */
#popupSawer{ position:fixed; inset:0; z-index:250; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.75); }
#popupSawer.show{ display:flex; }
#popupContent{ width:92%; max-width:420px; background:#fff; color:#000; border-radius:12px; padding:18px; text-align:center; transform:translateY(-12px); opacity:0; transition:transform 0.22s, opacity 0.22s; }
#popupSawer.show #popupContent{ transform:translateY(0); opacity:1; }
#popupHeader{ font-weight:900; margin-bottom:8px; line-height:1.15; }
#nominalList{ display:flex; flex-direction:column; gap:8px; margin-top:12px; }
.nominal-box{ display:flex; justify-content:space-between; align-items:center; padding:8px; background:#fef08a; border-radius:8px; font-weight:bold; }
.nominal-box .btns{ display:flex; gap:6px; }
.nominal-small{ padding:6px 8px; border-radius:6px; background:#111; color:#fff; border:none; cursor:pointer; font-weight:700; }

/* ============================
   RESPONSIVE MOBILE FIX (chat kanan) 
============================ */
@media (max-width:768px){
  #middleSection {
    flex-direction: row;
    flex-wrap: wrap;
    align-items: flex-start;
    gap: 8px;
  }
  .left-col {
    flex: 1 1 65%;
    max-width: 65%;
  }
  #chatContainer {
    flex: 1 1 32%;
    max-width: 32%;
    min-width: 200px;
    height: auto;
  }
  #player-container { 
    width: 100%; 
    aspect-ratio:16/9;
  }
  .stream-row { flex-wrap: wrap; }
  .stream-row span, .stream-row button { flex-shrink: 1; min-width: auto; }
}
</style>
</head>
<body class="dark flex flex-col items-center" oncontextmenu="return false">

<!-- HEADER -->
<div id="header">
  <span id="channelName">RENDY CASUAL</span>
  <button id="adminLogin">Admin Login</button>
</div>

<!-- MAIN -->
<main id="mainContent">
  <div id="middleSection">
    <!-- LEFT -->
    <div class="left-col">
      <div id="player-container">
        <video id="video" playsinline muted></video>
        <div id="overlay">‚è≥ Memuat stream...</div>
        <div id="controls">
          <div class="volume-group">
            <button id="btnMute" class="p-1 text-white"><i data-lucide="volume-2" class="w-5 h-5"></i></button>
            <input id="volumeControl" type="range" min="0" max="1" step="0.01" value="1">
          </div>
          <button id="btnQuality" class="p-1 text-white flex items-center gap-1"><i data-lucide="settings" class="w-5 h-5"></i> <span id="qualityLabel">Auto</span></button>
          <div id="qualityOptions" class="flex flex-col gap-2" aria-hidden="true">
            <button data-quality="auto" class="active">Auto</button>
            <button data-quality="360">360p</button>
            <button data-quality="480">480p</button>
            <button data-quality="720">720p HD</button>
            <button data-quality="1080">1080p HD</button>
          </div>
          <button id="btnFullscreen" class="p-1 text-white"><i data-lucide="maximize" class="w-5 h-5"></i></button>
        </div>
      </div>

      <div id="sawerBox">Klik Link untuk Tonton Live | Terima kasih atas dukungan Anda!</div>

      <div class="stream-row"><span>üî¥ INDO vs KOREA:</span><button data-stream="stream1" data-index="0">Link 1</button><button data-stream="stream1" data-index="1">Link 2</button><button data-stream="stream1" data-index="2">Link 3</button></div>
      <div class="stream-row"><span>üî¥ INDO vs KOREA:</span><button data-stream="stream2" data-index="0">Link 1</button><button data-stream="stream2" data-index="1">Link 2</button><button data-stream="stream2" data-index="2">Link 3</button></div>
      <div class="stream-row"><span>üî¥ INDO vs KOREA :</span><button data-stream="stream3" data-index="0">Link 1</button><button data-stream="stream3" data-index="1">Link 2</button><button data-stream="stream3" data-index="2">Link 3</button></div>
      <div class="stream-row"><span>üî¥ INDO vs KOREA :</span><button data-stream="stream4" data-index="0">Link 1</button><button data-stream="stream4" data-index="1">Link 2</button><button data-stream="stream4" data-index="2">Link 3</button></div>

      <button id="btnPlayStream" style="display:none;margin:12px auto;padding:10px 20px;background:red;color:#fff;font-weight:bold;border:none;border-radius:8px;cursor:pointer;font-size:1rem;z-index:300;">‚ñ∂Ô∏è Play Stream</button>
    </div>

    <!-- RIGHT -->
    <div id="chatContainer">
      <div id="chatBox"></div>
      <form id="chatForm">
        <input type="text" id="chatInput" placeholder="Ketik pesan..."/>
        <button type="submit">Kirim</button>
      </form>
    </div>
  </div>
</main>

<!-- FOOTER -->
<div id="footer"><a href="#" style="color:white; font-weight:bold;">¬© 2025 RENDY CASUAL</a></div>

<!-- POPUP SAWER -->
<div id="popupSawer" aria-hidden="true">
  <div id="popupContent">
    <div id="popupHeader">üí∏ SAWER SEIKHLASNYA<br><small>Sekali Sawer Nonton Gratis Tanpa Iklan</small></div>
    <div id="nominalList"></div>
    <div id="qrContainer" style="margin-top:12px; display:none; flex-direction:column; align-items:center; gap:8px; position:relative;">
      <img id="qrImage" src="" alt="QR Code" style="width:180px; height:180px; border:2px solid #000; border-radius:12px;">
      <div class="qr-msg">Silakan scan QR untuk verifikasi...</div>
    </div>
    <button onclick="closePopup()" style="margin-top:12px;padding:8px 12px;border-radius:8px;border:none;background:#111;color:#fff;font-weight:800;">Tutup</button>
  </div>
</div>

<script>
/* ============================
   Restored & Fixed JS version
   - Keeps original flows (QR, pendingStream, admin login)
   - Fixes volume handling, quality switching, fullscreen handling
   - Keeps original STREAMS object, uses chosen quality index if available
   ============================ */

lucide.createIcons();

/* ---------- STREAMS (kept original urls) ---------- */
const STREAMS = {
  stream1: { urls:[
    "https://live.alilicloud.com/live/a7236226f7213711f9891683d978fb38/playlist.m3u8",
    "https://live.alilicloud.com/live/a7236226f7213711f9891683d978fb38/playlist.m3u8",
    "https://redirector.rudo.video/hls-video/567ffde3fa319fadf3419efda25619456231dfea/latina/latina.smil/playlist.m3u8",
  ]},
  stream2: { urls:[
    "https://live.alilicloud.com/live/a7236226f7213711f9891683d978fb38/playlist.m3u8",
    "https://live.alilicloud.com/live/a7236226f7213711f9891683d978fb38/playlist.m3u8",
    "https://live.alilicloud.com/live/c8551919cfe98878229ef2d6b979aa49/playlist.m3u8",
  ]},
  stream3: { urls:[
    "https://mahabawdilive.pyoneplay.com/hls/stream.m3u8",
    "https://mahabawdilive.pyoneplay.com/hls/stream.m3u8",
    "https://live.alilicloud.com/live/c8551919cfe98878229ef2d6b979aa49/playlist.m3u8",
  ]},
  stream4: { urls:[
    "https://mahabawdilive.pyoneplay.com/hls/stream.m3u8",
    "https://mahabawdilive.pyoneplay.com/hls/stream.m3u8",
    "https://live.alilicloud.com/live/c8551919cfe98878229ef2d6b979aa49/playlist.m3u8",
  ]}
};

/* ---------- ELEMENT REFERENCES ---------- */
const video = document.getElementById('video'),
      overlay = document.getElementById('overlay'),
      container = document.getElementById('player-container'),
      btnFullscreen = document.getElementById('btnFullscreen'),
      btnMute = document.getElementById('btnMute'),
      volumeControl = document.getElementById('volumeControl'),
      qualityBtn = document.getElementById('btnQuality'),
      qualityOptions = document.getElementById('qualityOptions'),
      qualityLabel = document.getElementById('qualityLabel'),
      popup = document.getElementById('popupSawer'),
      nominalListEl = document.getElementById('nominalList'),
      qrContainer = document.getElementById('qrContainer'),
      qrImage = document.getElementById('qrImage'),
      btnPlayStream = document.getElementById('btnPlayStream'),
      chatContainer = document.getElementById('chatContainer');

let hls = null;
let lastActiveButton = null;
let pendingStream = null;
let qrTimer = null;
let isAdmin = false;
let selectedQuality = 'auto'; // 'auto'|'360'|'480'|'720'|'1080'

/* ---------- ADMIN LOGIN (preserve original) ---------- */
document.getElementById('adminLogin').addEventListener('click', ()=>{
  const u = prompt("Username user:"), p = prompt("Password password:");
  if(u === "reno" && p === "wadju"){ alert("Admin mode aktif"); isAdmin=true; }
  else alert("Login gagal!");
});

/* ---------- POPUP SAWER & QR (preserve original UI & flow) ---------- */
const NOMINALS = [10000,20000,30000,40000,50000];
function openPopup(){
  if(isAdmin) return;
  nominalListEl.innerHTML = "";
  qrContainer.style.display = "none";
  NOMINALS.forEach(n=>{
    const box = document.createElement('div'); box.className='nominal-box';
    box.innerHTML = `<div>Rp ${n.toLocaleString('id-ID')}</div>
      <div class="btns">
        <button class="nominal-small pay-gopay" data-nom="${n}">GoPay</button>
        <button class="nominal-small pay-dana" data-nom="${n}">Dana</button>
      </div>`;
    nominalListEl.appendChild(box);
  });
  // bind events
  nominalListEl.querySelectorAll('.pay-gopay').forEach(btn=>{
    btn.addEventListener('click', ()=> showQR('gopay', btn.dataset.nom));
  });
  nominalListEl.querySelectorAll('.pay-dana').forEach(btn=>{
    btn.addEventListener('click', ()=> showQR('dana', btn.dataset.nom));
  });

  popup.classList.add('show'); popup.setAttribute('aria-hidden','false');
  btnPlayStream.style.display = 'none';
}

function closePopup(){
  popup.classList.remove('show'); popup.setAttribute('aria-hidden','true');
  if(qrTimer) clearTimeout(qrTimer);
  // if not verified, keep nominal visible by default (original flow)
  if(qrContainer.dataset.verified !== "true"){
    nominalListEl.style.display = 'flex';
    qrContainer.style.display = 'none';
  }
}

function showQR(method, nominal){
  nominalListEl.style.display = 'none';
  qrContainer.style.display = 'flex';
  // preserve original sample images: use original links if you want to keep as-is
  qrImage.src = (method === 'gopay') ? "https://iili.io/Kos01X1.md.jpg" : "https://iili.io/Kot8APe.md.jpg";
  qrContainer.dataset.verified = "false";
  if(qrTimer) clearTimeout(qrTimer);
  qrTimer = setTimeout(()=>{
    // if user didn't verify within time, go back to nominal list
    if(qrContainer.dataset.verified !== "true"){
      nominalListEl.style.display = 'flex';
      qrContainer.style.display = 'none';
    }
  }, 10000);
}

/* Auto bypass QR if verified today (keeps original logic) */
if(localStorage.getItem('verified_'+new Date().toLocaleDateString()) === 'true'){
  qrContainer.dataset.verified = "true";
  btnPlayStream.style.display = 'block';
}

/* Play Stream: use selected quality index if possible */
function playStream(k, btn=null, quality = selectedQuality){
  // If not admin and not verified, prompt popup (original flow)
  if(!isAdmin && qrContainer.dataset.verified !== "true"){
    openPopup();
    pendingStream = { stream: k, btn: btn, quality: quality };
    return;
  }

  // update active button UI
  if(lastActiveButton) lastActiveButton.classList.remove("active");
  if(btn){ btn.classList.add("active"); lastActiveButton = btn; }

  // pick url by quality mapping
  const urls = STREAMS[k].urls || [];
  let index = 0; // default
  // map quality to index (best-effort); if mapped index doesn't exist, fallback to 0
  const qualityMap = { 'auto': 0, '360': 1, '480': 2, '720': 3, '1080': 4 };
  if(quality && qualityMap.hasOwnProperty(quality) && urls[ qualityMap[quality] ]){
    index = qualityMap[quality];
  } else {
    // if auto, try to pick the first available index (0)
    index = 0;
  }
  const url = urls[index] || urls[0];

  // destroy existing Hls
  if(hls){ try{ hls.destroy(); }catch(e){} hls = null; }
  if(Hls.isSupported()){
    hls = new Hls();
    hls.loadSource(url);
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED, ()=> {
      // autoplay best-effort (muted helps in many browsers)
      video.play().catch(()=>{ /* ignore autoplay errors */ });
      overlay.style.display = "none";
    });
    hls.on(Hls.Events.ERROR, function(event, data){
      console.warn("HLS error", data);
    });
  } else {
    // fallback for native HLS
    video.src = url;
    video.play().then(()=>{ overlay.style.display = "none"; }).catch(()=>{});
  }

  // close popup if it was open
  closePopup();
}

/* Bind stream-row buttons (preserve original behaviour) */
document.querySelectorAll('.stream-row button').forEach(btn=>{
  btn.addEventListener('click', ()=> {
    const s = btn.dataset.stream;
    const i = parseInt(btn.dataset.index || 0);
    // play selected stream using currently selected quality
    playStream(s, btn, selectedQuality);
  });
});

/* btnPlayStream flow (original logic) */
btnPlayStream.addEventListener('click', ()=>{
  qrContainer.dataset.verified = "true";
  localStorage.setItem('verified_'+new Date().toLocaleDateString(),'true');
  if(pendingStream) {
    playStream(pendingStream.stream, pendingStream.btn, pendingStream.quality);
    pendingStream = null;
  }
  btnPlayStream.style.display = 'none';
});

/* ---------- Fullscreen & orientation handling ---------- */
async function enterFullscreen(){
  try{
    if(container.requestFullscreen) await container.requestFullscreen();
    container.classList.add("fullscreen");
    btnFullscreen.innerHTML = '<i data-lucide="minimize" class="w-5 h-5"></i>'; lucide.createIcons();
    // try lock to landscape (best-effort)
    if(screen.orientation && screen.orientation.lock) screen.orientation.lock('landscape').catch(()=>{});
  }catch(e){}
}
async function exitFullscreen(){
  try{
    if(document.exitFullscreen) await document.exitFullscreen();
    container.classList.remove("fullscreen");
    btnFullscreen.innerHTML = '<i data-lucide="maximize" class="w-5 h-5"></i>'; lucide.createIcons();
    if(screen.orientation && screen.orientation.unlock) screen.orientation.unlock();
  }catch(e){}
}
btnFullscreen.addEventListener('click', ()=> { !document.fullscreenElement ? enterFullscreen() : exitFullscreen(); });
video.addEventListener('dblclick', ()=> { !document.fullscreenElement ? enterFullscreen() : exitFullscreen(); });

/* ---------- Volume Handling (fixed) ---------- */
function updateVolumeIcon(){
  btnMute.innerHTML = (video.muted || video.volume === 0) ? '<i data-lucide="volume-x" class="w-5 h-5"></i>' : '<i data-lucide="volume-2" class="w-5 h-5"></i>';
  lucide.createIcons();
}
volumeControl.addEventListener('input', (e)=>{
  const v = parseFloat(e.target.value);
  video.muted = false;
  video.volume = isNaN(v) ? 1 : v;
  updateVolumeIcon();
});
btnMute.addEventListener('click', ()=>{
  video.muted = !video.muted;
  updateVolumeIcon();
});

/* ---------- Quality dropdown (make it actually select quality) ---------- */
qualityBtn.addEventListener('click', ()=>{
  qualityOptions.style.display = (qualityOptions.style.display === "flex") ? "none" : "flex";
  qualityOptions.style.flexDirection = "column";
  qualityOptions.setAttribute('aria-hidden', qualityOptions.style.display === "flex" ? "false" : "true");
});
qualityOptions.querySelectorAll("button").forEach(b=>{
  b.addEventListener('click', ()=>{
    // remove active
    qualityOptions.querySelectorAll("button").forEach(bt => bt.classList.remove("active"));
    b.classList.add("active");
    selectedQuality = b.dataset.quality;
    qualityLabel.innerText = b.innerText;
    qualityOptions.style.display = "none";
    // If a stream is currently playing, attempt to reload it with new quality
    if(lastActiveButton){
      // re-play the currently active stream with the new quality
      const s = lastActiveButton.dataset.stream;
      playStream(s, lastActiveButton, selectedQuality);
    }
  });
});

/* ---------- Chat (improve size & auto height to match player) ---------- */
const chatBox = document.getElementById('chatBox'),
      chatForm = document.getElementById('chatForm'),
      chatInput = document.getElementById('chatInput');

function addChatMessage(user, msg){
  const div = document.createElement('div');
  div.innerHTML = `<strong style="color:yellow">${user}</strong>: ${escapeHtml(msg)}`;
  chatBox.appendChild(div);
  chatBox.scrollTop = chatBox.scrollHeight;
}

// simple escaping to avoid HTML injection in chat
function escapeHtml(unsafe) {
  return unsafe.replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]); });
}

chatForm.addEventListener('submit', e => {
  e.preventDefault();
  const msg = chatInput.value.trim();
  if(msg === '') return;
  const user = isAdmin ? 'Admin' : 'Guest';
  // store to localStorage (preserve original behavior)
  const data = { user: user, msg: msg, time: Date.now() };
  const messages = JSON.parse(localStorage.getItem('liveChat') || '[]');
  messages.push(data);
  localStorage.setItem('liveChat', JSON.stringify(messages));
  addChatMessage(data.user, data.msg);
  chatInput.value = '';
});

// load initial chat messages (original behavior)
(function initChatFromStorage(){
  const initMessages = JSON.parse(localStorage.getItem('liveChat') || '[]');
  initMessages.forEach(m => addChatMessage(m.user, m.msg));
})();

// sync chat across tabs (original)
window.addEventListener('storage', e => {
  if(e.key === 'liveChat'){
    chatBox.innerHTML = '';
    const messages = JSON.parse(localStorage.getItem('liveChat') || '[]');
    messages.forEach(m => addChatMessage(m.user, m.msg));
  }
});

/* ---------- Adjust chat height to fit player height and responsive rules ---------- */
function adjustChatHeight(){
  try{
    const playerHeight = container.offsetHeight;
    chatContainer.style.height = playerHeight + 'px';
  }catch(e){}
}
// Panggil saat resize window biasa
window.addEventListener('resize', adjustChatHeight);
window.addEventListener('load', adjustChatHeight);

// Tambahkan listener untuk fullscreen change
document.addEventListener('fullscreenchange', () => {
  if (!document.fullscreenElement) {
    // Keluar fullscreen ‚Üí hapus class fullscreen & sesuaikan layout
    container.classList.remove('fullscreen');
    btnFullscreen.innerHTML = '<i data-lucide="maximize" class="w-5 h-5"></i>';
    lucide.createIcons();
  } else {
    // Masuk fullscreen ‚Üí pastikan class fullscreen ada
    container.classList.add('fullscreen');
    btnFullscreen.innerHTML = '<i data-lucide="minimize" class="w-5 h-5"></i>';
    lucide.createIcons();
  }
  // Selalu sesuaikan tinggi chat saat masuk/keluar fullscreen
  adjustChatHeight();
});
/* ---------- Controls auto-hide (keeps original behavior) ---------- */
let controlsTimeout;
function showControls(){ document.querySelector('#controls').classList.remove('hidden'); resetControlsTimer(); }
function hideControls(){ document.querySelector('#controls').classList.add('hidden'); }
function resetControlsTimer(){ if(controlsTimeout) clearTimeout(controlsTimeout); controlsTimeout = setTimeout(hideControls, 3000); }
container.addEventListener('mousemove', showControls);
container.addEventListener('touchstart', showControls);
resetControlsTimer();

/* ---------- Small utility: allow clicking on streamed links that were pending after popup ---------- */
/* When user verifies (btnPlayStream), pendingStream is used to play. Already handled above. */

/* ---------- Autoplay fallback: when HLS attached and manifest parsed we hide overlay (set earlier) ---------- */
video.addEventListener('play', ()=> { overlay.style.display = 'none'; btnPlayStream.style.display='none';});
video.addEventListener('pause', ()=> { btnPlayStream.style.display='block'; });

/* ---------- Helper: if there was a pendingStream saved in localStorage from previous session, try to auto-play (optional) ---------- */
/* (kept minimal to respect original logic - not forcing play) */

</script>
</body>
</html>
