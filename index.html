<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<title>RENDY CASUAL</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
<style>
body.dark { background:#111; color:white; margin:0; font-family:sans-serif; }
#header{position:fixed;top:0;left:0;width:100%;z-index:100;text-align:center;font-family:'Orbitron',sans-serif;color:#fff;background:#000;display:flex;justify-content:center;align-items:center;padding:16px 0;}
#channelName{font-weight:900;font-size:2.5rem;letter-spacing:3px;text-shadow:0 0 6px rgba(255,0,0,0.3),0 0 12px rgba(255,255,255,0.25);animation:glow 2.5s infinite alternate;}
@keyframes glow{0%{text-shadow:0 0 6px rgba(255,0,0,0.4),0 0 12px rgba(255,255,255,0.3);}100%{text-shadow:0 0 8px rgba(255,255,255,0.4),0 0 16px rgba(255,0,0,0.4);}}
#adminLogin{position:absolute;right:20px;top:16px;background:#333;color:#fff;padding:6px 12px;border-radius:6px;cursor:pointer;font-weight:bold;}
#footer{position:fixed;bottom:0;left:0;width:100%;text-align:center;background:#000;color:#fff;padding:12px;font-weight:bold;z-index:100;box-shadow:0 -2px 8px rgba(0,0,0,0.5);}
#mainContent{margin-top:100px;margin-bottom:60px;width:100%;display:flex;flex-direction:column;align-items:center;}
#middleSection{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;width:100%;max-width:1200px;}
#player-container{position:relative;width:100%;max-width:900px;aspect-ratio:16/9;border-radius:12px;overflow:hidden;box-shadow:0 6px 16px rgba(0,0,0,0.6);}
#player-container.fullscreen{width:100vw;height:100vh;aspect-ratio:auto;border-radius:0;}
#video{width:100%;height:100%;object-fit:contain;}
#overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(240,240,240,0.85);color:#ff0000;font-size:20px;font-weight:bold;display:flex;align-items:center;justify-content:center;text-align:center;z-index:20;opacity:1;transition:opacity 0.3s;}
#controls{display:flex;gap:16px;align-items:center;position:absolute;bottom:10px;right:10px;z-index:15;background:#000;padding:8px 12px;border-radius:12px;font-size:14px;opacity:1;transition:opacity 0.5s;}
.volume-group{display:flex;align-items:center;gap:6px;}
#volumeControl{-webkit-appearance:none;width:80px;height:6px;background:#654321;border-radius:4px;}
#volumeControl::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;border-radius:50%;background:#fff;cursor:pointer;}
#qualityOptions{display:none;position:absolute;bottom:45px;right:40px;background:#000;padding:6px 10px;border-radius:6px;flex-direction:column;gap:6px;}
#qualityOptions button{background:transparent;border:none;color:#fff;cursor:pointer;font-size:0.85rem;font-weight:bold;}
#qualityOptions button.active{color:red;font-weight:bold;}
#chatContainer{display:flex;flex-direction:column;width:300px;min-width:250px;background:#222;color:#fff;border-radius:8px;overflow:hidden;}
#chatBox{flex:1;overflow-y:auto;padding:10px;font-size:0.9rem;}
#chatForm{display:flex;padding:8px;background:#111;gap:4px;}
#chatForm input{flex:1;padding:6px;border-radius:4px;border:none;background:#333;color:#fff;}
#chatForm button{padding:6px 10px;border-radius:4px;border:none;background:red;color:#fff;font-weight:bold;cursor:pointer;}
#popupSawer{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.75);z-index:250;transition:opacity 0.25s ease;opacity:0;}
#popupSawer.show{display:flex;opacity:1;}
#popupContent{width:90%;max-width:380px;background:#fff;color:#000;border-radius:12px;padding:18px;text-align:center;transform:translateY(-18px);transition:transform 0.25s ease, opacity 0.25s ease;opacity:0;}
#popupSawer.show #popupContent{transform:translateY(0);opacity:1;}
#popupHeader{font-weight:900;margin-bottom:8px;line-height:1.15;}
#nominalList{display:flex;flex-direction:column;gap:8px;margin-top:12px;}
.nominal-box{display:flex;justify-content:space-between;align-items:center;padding:8px;background:#fef08a;border-radius:8px;font-weight:bold;}
.nominal-box .btns{display:flex;gap:6px;}
.nominal-small{padding:6px 8px;border-radius:6px;background:#111;color:#fff;border:none;cursor:pointer;font-weight:700;}
#qrContainer{margin-top:12px;display:none;flex-direction:column;align-items:center;gap:8px;position:relative;}
#qrContainer img{width:180px;height:180px;border:2px solid #000;border-radius:12px;}
#qrContainer .qr-msg{font-weight:bold;color:#000;text-align:center;margin-bottom:12px;}
#btnPlayStream{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);padding:10px 20px;background:red;color:#fff;font-weight:bold;border:none;border-radius:8px;cursor:pointer;font-size:1rem;z-index:300;}
.stream-row{display:flex;flex-wrap:wrap;gap:8px;align-items:center;background:#111;padding:10px;border-radius:10px;box-shadow:0 3px 8px rgba(0,0,0,0.5);margin-top:10px;}
.stream-row span{min-width:180px;font-weight:bold;color:#fff;font-size:0.95rem;flex-shrink:0;}
.stream-row button{color:#000;font-weight:bold;background:#fff;border:1px solid #000;padding:5px 12px;border-radius:6px;cursor:pointer;font-size:0.85rem;transition:all 0.2s;flex-shrink:0;}
.stream-row button.active{background:red !important;color:white !important;}
@media (max-width:1024px){#middleSection{flex-direction:column;}#chatContainer{width:100%;max-width:100%;height:200px;}}
</style>
</head>
<body class="dark flex flex-col items-center" oncontextmenu="return false">

<div id="header">
  <span id="channelName">RENDY CASUAL</span>
  <button id="adminLogin">Admin Login</button>
</div>

<main id="mainContent">
<div id="middleSection">
  <div style="display:flex;flex-wrap:wrap;gap:20px;align-items:flex-start;">
    <!-- Video + Controls -->
    <div style="position:relative;flex:1;max-width:900px;">
      <div id="player-container">
        <video id="video" playsinline muted></video>
        <div id="overlay">‚è≥ Memuat stream...</div>
        <div id="controls">
          <div class="volume-group">
            <button id="btnMute" class="p-1 text-white"><i data-lucide="volume-2" class="w-5 h-5"></i></button>
            <input id="volumeControl" type="range" min="0" max="1" step="0.05" value="1">
          </div>
          <button id="btnQuality" class="p-1 text-white flex items-center gap-1"><i data-lucide="settings" class="w-5 h-5"></i> Auto</button>
          <div id="qualityOptions" class="flex flex-col gap-2">
            <button data-quality="auto" class="active">Auto</button>
            <button data-quality="360">360p</button>
            <button data-quality="480">480p</button>
            <button data-quality="720">720p HD</button>
            <button data-quality="1080">1080p HD</button>
          </div>
          <button id="btnFullscreen" class="p-1 text-white"><i data-lucide="maximize" class="w-5 h-5"></i></button>
        </div>
      </div>
      <div id="sawerBox">Klik Link untuk Tonton Live üíõ Terima kasih atas dukungan Anda!</div>

      <!-- Stream Links -->
      <div id="streamList">
        <div class="stream-row">
          <span>üî¥ INDO vs LIBANON:</span>
          <button data-stream="stream1">Link 1</button>
          <button data-stream="stream1">Link 2</button>
          <button data-stream="stream1">Link 3</button>
        </div>
        <div class="stream-row">
          <span>üî¥ INDO vs LIBANON:</span>
          <button data-stream="stream2">Link 1</button>
          <button data-stream="stream2">Link 2</button>
          <button data-stream="stream2">Link 3</button>
        </div>
        <div class="stream-row">
          <span>üî¥ INDO vs LEBANON:</span>
          <button data-stream="stream3">Link 1</button>
          <button data-stream="stream3">Link 2</button>
          <button data-stream="stream3">Link 3</button>
        </div>
      </div>
    </div>

    <!-- Chat -->
    <div id="chatContainer">
      <div id="chatBox"></div>
      <form id="chatForm">
        <input type="text" id="chatInput" placeholder="Ketik pesan..."/>
        <button type="submit">Kirim</button>
      </form>
    </div>
  </div>
</div>
</main>

<div id="footer"><a href="#" style="color:yellow; font-weight:bold;">Klik Link untuk Tonton Live üíõ</a> | ¬© 2025 RENDY CASUAL</div>

<!-- Popup Sawer & QR -->
<div id="popupSawer" aria-hidden="true">
  <div id="popupContent">
    <div id="popupHeader">üí∏ SAWER SEIKHLASNYA<br><small>Sekali Sawer Nonton Gratis Tanpa Iklan</small></div>
    <div id="nominalList"></div>
    <div id="qrContainer">
      <img id="qrImage" src="" alt="QR Code">
      <div class="qr-msg">Silakan scan QR untuk verifikasi...</div>
      <button id="btnPlayStream">‚ñ∂Ô∏è Play Stream</button>
    </div>
    <button onclick="closePopup()" style="margin-top:12px;background:#333;color:#fff;padding:6px 12px;border-radius:6px;border:none;cursor:pointer;">Tutup</button>
  </div>
</div>

<script>
lucide.createIcons();

const video=document.getElementById("video"),
      overlay=document.getElementById("overlay"),
      container=document.getElementById("player-container"),
      controls=document.getElementById("controls"),
      btnFullscreen=document.getElementById("btnFullscreen"),
      btnMute=document.getElementById("btnMute"),
      volumeControl=document.getElementById("volumeControl"),
      qualityBtn=document.getElementById("btnQuality"),
      qualityOptions=document.getElementById("qualityOptions"),
      chatBox=document.getElementById("chatBox"),
      chatForm=document.getElementById("chatForm"),
      chatInput=document.getElementById("chatInput"),
      popup=document.getElementById('popupSawer'),
      nominalListEl=document.getElementById('nominalList'),
      qrContainer=document.getElementById('qrContainer'),
      qrImage=document.getElementById('qrImage'),
      btnPlayStream=document.getElementById('btnPlayStream'),
      adminLoginBtn=document.getElementById('adminLogin');

let hls=null,lastActiveButton=null,pendingStream=null,qrCheckInterval=null,isAdmin=false;
const NOMINALS=[10000,20000,30000,40000,50000];

// --- ADMIN LOGIN ---
adminLoginBtn.addEventListener('click',()=>{
  const user=prompt("Admin Username:");
  const pass=prompt("Admin Password:");
  if(user==="admin" && pass==="12345"){
    isAdmin=true;
    alert("Admin mode aktif: bypass QR & bisa langsung play.");
  } else { alert("Login gagal."); }
});

// --- SAWER POPUP ---
function openPopup(){
  if(isAdmin) return;
  nominalListEl.innerHTML="";
  qrContainer.style.display="none";
  btnPlayStream.style.display="none";
  NOMINALS.forEach(n=>{
    const box=document.createElement('div');box.className='nominal-box';
    box.innerHTML=`<div>Rp ${n.toLocaleString('id-ID')}</div>
      <div class="btns">
        <button class="nominal-small pay-gopay" data-nom="${n}">GoPay</button>
        <button class="nominal-small pay-dana" data-nom="${n}">Dana</button>
      </div>`;
    nominalListEl.appendChild(box);
  });
  nominalListEl.querySelectorAll('.pay-gopay').forEach(btn=>{btn.addEventListener('click',()=>{showQR('gopay',btn.dataset.nom);});});
  nominalListEl.querySelectorAll('.pay-dana').forEach(btn=>{btn.addEventListener('click',()=>{showQR('dana',btn.dataset.nom);});});
  popup.classList.add('show'); popup.setAttribute('aria-hidden','false');
}
function closePopup(){popup.classList.remove('show'); popup.setAttribute('aria-hidden','true'); qrContainer.style.display='none'; btnPlayStream.style.display='none'; if(qrCheckInterval) clearInterval(qrCheckInterval);}
function showQR(method,nominal){nominalListEl.style.display='none'; qrContainer.style.display='flex'; btnPlayStream.style.display='none'; qrImage.src=(method==='gopay')?"https://iili.io/Kos01X1.md.jpg":"https://iili.io/Kot8APe.md.jpg"; qrContainer.dataset.method=method; qrContainer.dataset.nominal=nominal; qrContainer.dataset.verified="false"; const qrId=`${method}-${nominal}-${Date.now()}`; startQrPolling(qrId);}
function startQrPolling(qrId){if(qrCheckInterval) clearInterval(qrCheckInterval); qrCheckInterval=setInterval(async()=>{try{qrContainer.dataset.verified="true"; btnPlayStream.style.display="block";clearInterval(qrCheckInterval);}catch(err){console.error(err);}},2000);}

// --- STREAMS DEFINISI ---
const STREAMS = {
  stream1:{ urls:["https://redirector.rudo.video/hls-video/567ffde3fa319fadf3419efda25619456231dfea/latina/latina.smil/playlist.m3u8"] },
  stream2:{ urls:["https://redirector.rudo.video/hls-video/stream2-main.m3u8"] },
  stream3:{ urls:["https://redirector.rudo.video/hls-video/stream3-main.m3u8"] }
};

// --- STREAM BUTTON CLICK ---
document.querySelectorAll(".stream-row button").forEach(btn=>{
  btn.addEventListener("click",()=>{
    const streamKey=btn.dataset.stream;
    pendingStream={stream:streamKey,index:0,btn:btn};
    if(isAdmin){ playStream(streamKey,0,btn); }
    else { openPopup(); }
  });
});

// --- PLAY STREAM ---
function playStream(streamKey,index=0,btn=null){
  if(lastActiveButton) lastActiveButton.classList.remove("active");
  if(btn){ btn.classList.add("active"); lastActiveButton=btn; }
  const url=STREAMS[streamKey].urls[index];
  if(hls){ hls.destroy(); hls=null; }
  if(Hls.isSupported()){
    hls=new Hls();
    hls.loadSource(url);
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED,()=>{video.play(); overlay.style.display="none";});
  } else { video.src=url; video.play().then(()=>{overlay.style.display="none";}); }
  closePopup();
}
btnPlayStream.addEventListener('click',()=>{if(qrContainer.dataset.verified==="true" && pendingStream){playStream(pendingStream.stream,pendingStream.index,pendingStream.btn);}});

// --- FULLSCREEN ---
btnFullscreen.addEventListener("click",()=>{!document.fullscreenElement?container.requestFullscreen():document.exitFullscreen();});
video.addEventListener("dblclick",()=>{!document.fullscreenElement?container.requestFullscreen():document.exitFullscreen();});

// --- VOLUME ---
function updateVolumeIcon(){btnMute.innerHTML = video.muted||video.volume===0?'<i data-lucide="volume-x" class="w-5 h-5"></i>':'<i data-lucide="volume-2" class="w-5 h-5"></i>'; lucide.createIcons();}
volumeControl.addEventListener("input",e=>{video.muted=false;video.volume=e.target.value;updateVolumeIcon();});
btnMute.addEventListener("click",()=>{video.muted=!video.muted;updateVolumeIcon();});

// --- QUALITY DROPDOWN ---
qualityBtn.addEventListener("click",()=>{qualityOptions.style.display=qualityOptions.style.display==="flex"?"none":"flex";});
qualityOptions.querySelectorAll("button").forEach(b=>{b.addEventListener("click",()=>{qualityOptions.querySelectorAll("button").forEach(bt=>bt.classList.remove("active"));b.classList.add("active");qualityBtn.innerText=b.innerText;qualityOptions.style.display="none";});});

// --- CHAT ---
function addChatMessage(user,msg){const div=document.createElement('div'); div.innerHTML=`<strong style="color:yellow">${user}</strong>: ${msg}`; chatBox.appendChild(div); chatBox.scrollTop=chatBox.scrollHeight;}
chatForm.addEventListener('submit',e=>{e.preventDefault();const msg=chatInput.value.trim();if(msg==='')return;const data={user:isAdmin?"Admin":"Guest",msg:msg,time:Date.now()};const messages=JSON.parse(localStorage.getItem('liveChat')||'[]');messages.push(data);localStorage.setItem('liveChat',JSON.stringify(messages));addChatMessage(data.user,msg);chatInput.value='';});
window.addEventListener('storage',e=>{if(e.key==='liveChat'){chatBox.innerHTML='';const messages=JSON.parse(localStorage.getItem('liveChat')||'[]');messages.forEach(m=>addChatMessage(m.user,m.msg));}});
const initMessages=JSON.parse(localStorage.getItem('liveChat')||'[]');initMessages.forEach(m=>addChatMessage(m.user,m.msg));

// --- ADJUST CHAT HEIGHT ---
function adjustChatHeight(){const vh=container.offsetHeight; chatContainer.style.height=vh+'px';}
window.addEventListener('resize',adjustChatHeight);
window.addEventListener('load',adjustChatHeight);

</script>
</body>
</html>
