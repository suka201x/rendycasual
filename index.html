<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<title>RENDY CASUAL</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet">

<style>
/* === CSS sama persis dengan versi sebelumnya yang sudah dirapikan === */
/* ... (CSS dari jawaban sebelumnya tetap di sini, tidak diubah) ... */
</style>
</head>
<body class="dark flex flex-col items-center" oncontextmenu="return false">

<!-- ===== HEADER ===== -->
<div id="header">
  <span id="channelName">RENDY CASUAL</span>
  <button id="adminLogin">Admin Login</button>
</div>

<!-- ===== MAIN ===== -->
<main id="mainContent">
  <div id="middleSection">
    <!-- Left -->
    <div class="left-col">
      <div id="player-container">
        <video id="video" playsinline muted></video>
        <div id="overlay">⏳ Memuat stream...</div>
        <div id="controls">
          <div class="volume-group">
            <button id="btnMute" class="p-1 text-white"><i data-lucide="volume-2" class="w-5 h-5"></i></button>
            <input id="volumeControl" type="range" min="0" max="1" step="0.01" value="1">
          </div>
          <button id="btnQuality" class="p-1 text-white flex items-center gap-1">
            <i data-lucide="settings" class="w-5 h-5"></i> <span id="qualityLabel">Auto</span>
          </button>
          <div id="qualityOptions" aria-hidden="true">
            <button data-quality="auto" class="active">Auto</button>
            <button data-quality="360">360p</button>
            <button data-quality="480">480p</button>
            <button data-quality="720">720p HD</button>
            <button data-quality="1080">1080p HD</button>
          </div>
          <button id="btnFullscreen" class="p-1 text-white"><i data-lucide="maximize" class="w-5 h-5"></i></button>
        </div>
      </div>

      <div id="sawerBox">Klik Link untuk Tonton Live | Terima kasih atas dukungan Anda!</div>

      <div class="stream-row"><span>🔴 INDO vs KOREA:</span><button data-stream="stream1" data-index="0">Link 1</button><button data-stream="stream1" data-index="1">Link 2</button><button data-stream="stream1" data-index="2">Link 3</button></div>
      <div class="stream-row"><span>🔴 INDO vs KOREA:</span><button data-stream="stream2" data-index="0">Link 1</button><button data-stream="stream2" data-index="1">Link 2</button><button data-stream="stream2" data-index="2">Link 3</button></div>
      <div class="stream-row"><span>🔴 INDO vs KOREA :</span><button data-stream="stream3" data-index="0">Link 1</button><button data-stream="stream3" data-index="1">Link 2</button><button data-stream="stream3" data-index="2">Link 3</button></div>
      <div class="stream-row"><span>🔴 INDO vs KOREA :</span><button data-stream="stream4" data-index="0">Link 1</button><button data-stream="stream4" data-index="1">Link 2</button><button data-stream="stream4" data-index="2">Link 3</button></div>

      <button id="btnPlayStream" style="display:none;margin:12px auto;padding:10px 20px;background:red;color:#fff;font-weight:bold;border:none;border-radius:8px;cursor:pointer;font-size:1rem;z-index:300;">▶️ Play Stream</button>
    </div>

    <!-- Right -->
    <div id="chatContainer">
      <div id="chatBox"></div>
      <form id="chatForm">
        <input type="text" id="chatInput" placeholder="Ketik pesan..."/>
        <button type="submit">Kirim</button>
      </form>
    </div>
  </div>
</main>

<!-- ===== FOOTER ===== -->
<div id="footer"><a href="#" style="color:white; font-weight:bold;">© 2025 RENDY CASUAL</a></div>

<!-- ===== POPUP SAWER ===== -->
<div id="popupSawer" aria-hidden="true">
  <div id="popupContent">
    <div id="popupHeader">💸 SAWER SEIKHLASNYA<br><small>Sekali Sawer Nonton Gratis Tanpa Iklan</small></div>
    <div id="nominalList"></div>
    <div id="qrContainer" style="margin-top:12px; display:none; flex-direction:column; align-items:center; gap:8px; position:relative;">
      <img id="qrImage" src="" alt="QR Code" style="width:180px; height:180px; border:2px solid #000; border-radius:12px;">
      <div class="qr-msg">Silakan scan QR untuk verifikasi...</div>
    </div>
    <button onclick="closePopup()" style="margin-top:12px;padding:8px 12px;border-radius:8px;border:none;background:#111;color:#fff;font-weight:800;">Tutup</button>
  </div>
</div>

<script>
// === Player & HLS ===
const video = document.getElementById("video");
const overlay = document.getElementById("overlay");
const btnPlayStream = document.getElementById("btnPlayStream");
let hls;

function loadStream(url){
  if(hls){ hls.destroy(); }
  hls = new Hls();
  hls.loadSource(url);
  hls.attachMedia(video);
  hls.on(Hls.Events.MANIFEST_PARSED, ()=>{
    overlay.style.display = 'none';
    video.play();
  });
}

// Dummy stream links
const streams = {
  stream1:["https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"],
  stream2:["https://test-streams.mux.dev/test_001/stream.m3u8"],
  stream3:["https://test-streams.mux.dev/dai-discontinuity-deltatre/manifest.m3u8"],
  stream4:["https://test-streams.mux.dev/bbb-abr/bbb.m3u8"]
};

document.querySelectorAll(".stream-row button").forEach(btn=>{
  btn.addEventListener("click",()=>{
    document.querySelectorAll(".stream-row button").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    let s=btn.dataset.stream, i=btn.dataset.index;
    loadStream(streams[s][i]);
  });
});

// === Kontrol Player ===
const btnMute=document.getElementById("btnMute"),volumeControl=document.getElementById("volumeControl"),btnQuality=document.getElementById("btnQuality"),qualityOptions=document.getElementById("qualityOptions"),qualityLabel=document.getElementById("qualityLabel"),btnFullscreen=document.getElementById("btnFullscreen"),controls=document.getElementById("controls");

btnMute.addEventListener("click",()=>{
  video.muted=!video.muted;
  btnMute.innerHTML = video.muted? '<i data-lucide="volume-x" class="w-5 h-5"></i>' : '<i data-lucide="volume-2" class="w-5 h-5"></i>';
  lucide.createIcons();
});
volumeControl.addEventListener("input",()=>{ video.volume=volumeControl.value; });

btnQuality.addEventListener("click",()=>{ qualityOptions.style.display = qualityOptions.style.display==='flex'?'none':'flex'; });
qualityOptions.querySelectorAll("button").forEach(b=>{
  b.addEventListener("click",()=>{
    qualityOptions.querySelectorAll("button").forEach(bb=>bb.classList.remove("active"));
    b.classList.add("active");
    qualityLabel.textContent=b.textContent;
    qualityOptions.style.display="none";
  });
});

btnFullscreen.addEventListener("click",()=>{
  if(!document.fullscreenElement){
    document.getElementById("player-container").requestFullscreen();
  } else {
    document.exitFullscreen();
  }
});

document.addEventListener("fullscreenchange",()=>{
  document.getElementById("player-container").classList.toggle("fullscreen",!!document.fullscreenElement);
});

// Auto-hide controls
let hideTimeout;
video.addEventListener("mousemove",()=>{
  controls.classList.remove("hidden");
  clearTimeout(hideTimeout);
  hideTimeout=setTimeout(()=>controls.classList.add("hidden"),2000);
});

// === Chat ===
const chatForm=document.getElementById("chatForm"),chatInput=document.getElementById("chatInput"),chatBox=document.getElementById("chatBox");
chatForm.addEventListener("submit",e=>{
  e.preventDefault();
  if(chatInput.value.trim()==="") return;
  let msg=document.createElement("div");
  msg.textContent=chatInput.value;
  chatBox.appendChild(msg);
  chatInput.value="";
  chatBox.scrollTop=chatBox.scrollHeight;
});

// === Popup Sawer ===
const popupSawer=document.getElementById("popupSawer"),popupContent=document.getElementById("popupContent"),nominalList=document.getElementById("nominalList"),qrContainer=document.getElementById("qrContainer"),qrImage=document.getElementById("qrImage");

function openPopup(){ popupSawer.classList.add("show"); popupSawer.setAttribute("aria-hidden","false"); }
function closePopup(){ popupSawer.classList.remove("show"); popupSawer.setAttribute("aria-hidden","true"); }

document.getElementById("sawerBox").addEventListener("click",openPopup);

const data=[{label:"Rp10.000",va:"1234567890",qr:"https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=Rp10000"},{label:"Rp25.000",va:"0987654321",qr:"https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=Rp25000"}];

function populateNominal(){
  nominalList.innerHTML="";
  data.forEach(d=>{
    let box=document.createElement("div");
    box.className="nominal-box";
    box.innerHTML=`<span>${d.label}</span><div class="btns"><button class="nominal-small" onclick="showQR('${d.qr}')">QR</button><button class="nominal-small" onclick="copyVA('${d.va}')">VA</button></div>`;
    nominalList.appendChild(box);
  });
}
function showQR(src){ qrContainer.style.display="flex"; qrImage.src=src; }
function copyVA(va){ navigator.clipboard.writeText(va).then(()=>alert("VA disalin: "+va)); }
populateNominal();

// Init
lucide.createIcons();
</script>

</body>
</html>
