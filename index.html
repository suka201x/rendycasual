<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<title>RENDY CASUAL ‚Äì Live</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#000;
    --panel:#111;
    --panel-2:#1a1a1a;
    --text:#fff;
    --muted:#bbb;
    --link-bg:#222;
    --link-border:#444;
    --link-hover:#ff0;
    --accent:#ff0;
    --danger:#e00;
    --shadow:0 6px 16px rgba(0,0,0,.55);
    --radius:12px;
  }
  html,body{height:100%;}
  body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;}

  #adminLogin{position:fixed;top:8px;right:10px;z-index:1000;background:#222;color:#fff;border:1px solid #333;border-radius:8px;padding:6px 10px;font-size:12px;cursor:pointer;box-shadow:var(--shadow);}

  #wrap{width:100%;max-width:1400px;margin:0 auto;padding:10px 8px 16px;}
  #row{display:flex;gap:10px;align-items:flex-start;}
  #left{flex:1 1 auto;min-width:0;}
  #right{flex:0 0 clamp(180px, 20vw, 280px);min-width:180px;}

  #playerCard{background:var(--panel);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;}
  #player{position:relative;width:100%;aspect-ratio:16/9;background:#000;}
  #video{width:100%;height:100%;display:block;background:#000;}
  #overlay{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,.06);color:#ff2d2d;font-weight:800;}

  #controls{display:flex;justify-content:center;align-items:center;gap:8px;padding:8px;background:var(--panel-2);border-top:1px solid #222;font-size:clamp(11px, 2.8vw, 14px);}
  .ctrl-btn{background:#222;color:#fff;border:1px solid #333;border-radius:8px;padding:6px 10px;cursor:pointer;font-weight:700;min-height:32px;}
  .ctrl-btn:hover{background:#2d2d2d;}
  #volWrap{display:flex;align-items:center;gap:6px;}
  #volume{width:clamp(70px, 18vw, 120px);accent-color:#fff;}

  #qualityWrap{position:relative;}
  #qualityMenu{position:absolute;bottom:100%;right:0;transform:translateY(-8px);background:#000;border:1px solid #333;border-radius:10px;box-shadow:var(--shadow);display:none;min-width:140px;padding:6px;}
  #qualityMenu.show{display:block;}
  #qualityMenu button{display:block;width:100%;text-align:left;background:transparent;color:#fff;border:0;padding:8px;border-radius:8px;cursor:pointer;font-weight:800;}
  #qualityMenu button.active,#qualityMenu button:hover{background:#111;color:#ff2d2d;}

  #info{margin:10px 0;background:var(--accent);color:#000;font-weight:900;text-align:center;padding:8px 10px;border-radius:10px;}

  .match{background:#111;border-radius:10px;padding:10px;box-shadow:var(--shadow);margin-bottom:10px;}
  .match-head{font-family:'Orbitron',sans-serif;letter-spacing:.5px;font-weight:900;font-size:clamp(13px,3vw,16px);margin-bottom:8px;display:flex;align-items:center;gap:8px;color:#fff;}
  .links{display:flex;gap:8px;flex-wrap:wrap;}
  .link-btn{background:var(--link-bg);color:#fff;border:1px solid var(--link-border);padding:6px 10px;border-radius:8px;font-weight:900;cursor:pointer;}
  .link-btn:hover{background:var(--link-hover);color:#000;}
  .link-btn.active{background:#ff2d2d;color:#fff;border-color:#ff2d2d;}

  #chat{background:#121212;border-radius:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;min-height:100%;}
  #chatHeader{padding:10px 12px;border-bottom:1px solid #222;font-weight:900;font-size:14px;}
  #chatBox{flex:1;overflow-y:auto;padding:10px 10px 2px;scroll-behavior:smooth;}
  .msg{margin:6px 0;font-size:13px;}
  .msg .u{color:#ff0;font-weight:900;}
  .msg.admin .u{color:#0f0;}
  #chatForm{display:flex;gap:6px;padding:10px;border-top:1px solid #222;background:#0e0e0e;}
  #chatInput{flex:1;background:#1c1c1c;color:#fff;border:1px solid #333;border-radius:8px;padding:8px;font-size:14px;}
  #btnSend{background:var(--danger);color:#fff;border:0;border-radius:8px;padding:8px 12px;font-weight:900;cursor:pointer;}
  #btnSend:hover{filter:brightness(1.08);}

  @media (max-width:760px){
    #row{gap:6px;}
    #right{flex-basis:30%;min-width:150px;}
    #left{flex-basis:70%;}
    .match-head{font-size:13px;}
    .ctrl-btn{padding:5px 8px;border-radius:8px;min-height:30px;}
    #volume{width:clamp(60px,26vw,110px);}
  }
</style>
</head>
<body>

<button id="adminLogin" type="button">Admin</button>

<div id="wrap">
  <div id="row">
    <section id="left">
      <div id="playerCard">
        <div id="player">
          <video id="video" playsinline muted></video>
          <div id="overlay">‚è≥ Memuat stream...</div>
        </div>
        <div id="controls">
          <div id="volWrap">
            <button class="ctrl-btn" id="btnMute">üîä</button>
            <input type="range" id="volume" min="0" max="1" step="0.01" value="1" />
          </div>
          <div id="qualityWrap">
            <button class="ctrl-btn" id="qualityBtn">HD ‚ñæ</button>
            <div id="qualityMenu">
              <button data-q="auto" class="active">Auto</button>
              <button data-q="360">360p</button>
              <button data-q="480">480p</button>
              <button data-q="720">720p</button>
              <button data-q="1080">1080p</button>
            </div>
          </div>
          <button class="ctrl-btn" id="btnFS">‚§¢</button>
        </div>
      </div>
      <div id="info">Klik Link untuk Tonton Live | Terima kasih atas dukungan Anda!</div>

      <div class="match"><div class="match-head">üî¥ VOLI 1 :</div><div class="links">
        <button class="link-btn" data-stream="stream1" data-index="0">Link 1</button>
        <button class="link-btn" data-stream="stream1" data-index="1">Link 2</button>
        <button class="link-btn" data-stream="stream1" data-index="2">Link 3</button>
      </div></div>

      <div class="match"><div class="match-head">üî¥ VOLI 2 :</div><div class="links">
        <button class="link-btn" data-stream="stream2" data-index="0">Link 1</button>
        <button class="link-btn" data-stream="stream2" data-index="1">Link 2</button>
        <button class="link-btn" data-stream="stream2" data-index="2">Link 3</button>

    </section>

    <aside id="right">
      <div id="chat">
        <div id="chatHeader">üí¨ Live Chat</div>
        <div id="chatBox"></div>
        <form id="chatForm" autocomplete="off">
          <input id="chatInput" type="text" placeholder="Ketik pesan..." />
          <button id="btnSend" type="submit">Kirim</button>
        </form>
      </div>
    </aside>
  </div>
</div>

<script>
const STREAMS = {
  stream1:{urls:
["https://livecloud.pstatic.net/sports/lip2_kr/anmssgpu0002/wv9i9c4xb8to9kgvqg5mc9ppdhr3amgi2b/playlist.m3u8?hdnts=st=1757738514~exp=1757770924~acl=*/wv9i9c4xb8to9kgvqg5mc9ppdhr3amgi2b/*~hmac=1f7dc273e59820ef48dbeb24f7f738767496edf041d8a75499d1984366d12641"]} 
  stream2:{urls:
["https://livecdn.euw1-0005.jwplive.com/live/sites/fM9jRrkn/media/NlOH91YL/live.isml/.m3u8"]},

};

const video=document.getElementById('video');
const overlay=document.getElementById('overlay');
const player=document.getElementById('player');
const adminBtn=document.getElementById('adminLogin');
const btnMute=document.getElementById('btnMute');
const volume=document.getElementById('volume');
const btnFS=document.getElementById('btnFS');
const qualityBtn=document.getElementById('qualityBtn');
const qualityMenu=document.getElementById('qualityMenu');
const chatBox=document.getElementById('chatBox');
const chatForm=document.getElementById('chatForm');
const chatInput=document.getElementById('chatInput');

let hls=null;let isAdmin=false;let selectedStreamKey='stream1';let selectedUrlIndex=0;let selectedQuality='auto';

adminBtn.addEventListener('click',()=>{const u=prompt('Username:');const p=prompt('Password:');if(u==='reno'&&p==='wadju'){isAdmin=true;alert('Admin aktif');}else{alert('Login gagal');}});

function destroyHls(){if(hls){try{hls.destroy();}catch(e){}hls=null;}}
function loadStreamBy(key,idx=0){
  selectedStreamKey=key;selectedUrlIndex=idx;
  const urls=STREAMS[key]?.urls||[];const src=urls[idx]||urls[0];if(!src)return;
  destroyHls();overlay.style.display='flex';
  if(Hls.isSupported()){hls=new Hls();hls.loadSource(src);hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED,()=>{applyQuality(selectedQuality);video.play().catch(()=>{});overlay.style.display='none';});}
  else if(video.canPlayType('application/vnd.apple.mpegurl')){video.src=src;video.play().catch(()=>{});overlay.style.display='none';}
  else{video.src=src;video.play().catch(()=>{});overlay.style.display='none';}
  document.querySelectorAll('.link-btn').forEach(b=>b.classList.remove('active'));
  const activeBtn=document.querySelector(`.link-btn[data-stream="${key}"][data-index="${idx}"]`);
  if(activeBtn)activeBtn.classList.add('active');
}
function findLevelIndexByHeight(target){if(!hls||!hls.levels)return-1;const lvls=hls.levels;const arr=lvls.map((l,i)=>({i,h:l.height||0})).sort((a,b)=>a.h-b.h);let pick=arr[0].i;for(const item of arr){if(item.h<=target)pick=item.i;else break;}return pick;}
function applyQuality(q){selectedQuality=q;if(!hls)return;if(q==='auto'){hls.currentLevel=-1;setQualityActive('auto');return;}const targetHeight=q==='360'?360:q==='480'?480:q==='720'?720:1080;const idx=findLevelIndexByHeight(targetHeight);if(idx>=0){hls.currentLevel=idx;setQualityActive(q);}else{setQualityActive('auto');hls.currentLevel=-1;}}
function setQualityActive(val){qualityMenu.querySelectorAll('button').forEach(b=>b.classList.remove('active'));const btn=qualityMenu.querySelector(`button[data-q="${val}"]`);if(btn)btn.classList.add('active');qualityBtn.textContent=(val==='auto'?'HD ‚ñæ':val+'p ‚ñæ');}
qualityBtn.addEventListener('click',()=>{qualityMenu.classList.toggle('show');});
qualityMenu.querySelectorAll('button').forEach(b=>{b.addEventListener('click',()=>{applyQuality(b.dataset.q);qualityMenu.classList.remove('show');});});
document.querySelectorAll('.link-btn').forEach(btn=>{btn.addEventListener('click',()=>{loadStreamBy(btn.dataset.stream,parseInt(btn.dataset.index));});});
loadStreamBy('stream1',0);

function setMuteIcon(){btnMute.textContent=(video.muted||video.volume===0)?'üîá':'üîä';}
btnMute.addEventListener('click',()=>{video.muted=!video.muted;if(!video.muted&&video.volume===0){video.volume=0.6;volume.value=0.6;}setMuteIcon();});
volume.addEventListener('input',(e)=>{video.volume=parseFloat(e.target.value);video.muted=(video.volume===0);setMuteIcon();});setMuteIcon();

async function enterFS(el){try{if(el.requestFullscreen)await el.requestFullscreen();if(screen.orientation?.lock){try{await screen.orientation.lock('landscape');}catch(e){}}}catch(e){}}
async function exitFS(){try{if(document.exitFullscreen)await document.exitFullscreen();if(screen.orientation?.unlock){try{screen.orientation.unlock();}catch(e){}}}catch(e){}}
btnFS.addEventListener('click',()=>{if(!document.fullscreenElement)enterFS(player);else exitFS();});
document.addEventListener('fullscreenchange',()=>{btnFS.textContent=(document.fullscreenElement?'‚§°':'‚§¢');});

const CHAT_KEY='rc_chat_items';const MAX_AGE=5*60*1000;
function now(){return Date.now();}
function saveChat(user,text){const arr=getChat().filter(m=>now()-m.t<MAX_AGE);arr.push({u:user,x:text,t:now()});localStorage.setItem(CHAT_KEY,JSON.stringify(arr));}
function getChat(){try{return JSON.parse(localStorage.getItem(CHAT_KEY)||'[]');}catch{return[];}}
function renderChat(){chatBox.innerHTML='';getChat().forEach(m=>addMsg(m.u,m.x));}
function addMsg(u,x){const d=document.createElement('div');d.className='msg'+(u==='Admin'?' admin':'');d.innerHTML=`<span class="u">${u}</span>: <span class="t"></span>`;d.querySelector('.t').textContent=x;chatBox.appendChild(d);}
chatForm.addEventListener('submit',(e)=>{e.preventDefault();const txt=chatInput.value.trim();if(!txt)return;const user=isAdmin?'Admin':'Guest';addMsg(user,txt);saveChat(user,txt);chatInput.value='';chatBox.scrollTop=chatBox.scrollHeight;});
(function initChat(){const arr=getChat().filter(m=>now()-m.t<MAX_AGE);localStorage.setItem(CHAT_KEY,JSON.stringify(arr));renderChat();chatBox.scrollTop=chatBox.scrollHeight;})();
window.addEventListener('storage',(e)=>{if(e.key===CHAT_KEY){renderChat();chatBox.scrollTop=chatBox.scrollHeight;}});
function syncChatHeight(){const rect=document.getElementById('playerCard').getBoundingClientRect();const chat=document.getElementById('chat');chat.style.minHeight=rect.height+'px';chat.style.height=rect.height+'px';}
window.addEventListener('load',syncChatHeight);window.addEventListener('resize',syncChatHeight);document.addEventListener('fullscreenchange',syncChatHeight);
video.addEventListener('play',()=>{overlay.style.display='none';});
</script>
</body>
</html>
